<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Revay ‚Äî Recovery & Resurrection Guide</title>
<style>
  :root {
    --bg: #0f1117;
    --surface: #1a1d27;
    --surface2: #22263a;
    --border: #2e3350;
    --accent: #7c6af7;
    --accent2: #4fd1c5;
    --warn: #f6ad55;
    --danger: #fc8181;
    --success: #68d391;
    --text: #e2e8f0;
    --muted: #718096;
    --code-bg: #111827;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; padding: 0 0 80px; }
  .hero { background: linear-gradient(135deg, #1a1d27 0%, #0f1117 60%, #1a1230 100%); border-bottom: 1px solid var(--border); padding: 60px 40px 50px; text-align: center; }
  .hero-icon { font-size: 56px; display: block; margin-bottom: 16px; }
  .hero h1 { font-size: 2.4rem; font-weight: 700; letter-spacing: -0.5px; }
  .hero h1 span { color: var(--accent); }
  .hero p { color: var(--muted); font-size: 1.05rem; margin-top: 10px; max-width: 560px; margin-left: auto; margin-right: auto; }
  .hero-meta { margin-top: 20px; display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; }
  .meta-tag { background: var(--surface2); border: 1px solid var(--border); border-radius: 20px; padding: 4px 14px; font-size: 0.8rem; color: var(--muted); }
  .meta-tag span { color: var(--text); font-weight: 600; }
  .container { max-width: 860px; margin: 0 auto; padding: 0 24px; }
  .section { margin-top: 48px; }
  .section-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid var(--border); }
  .section-num { background: var(--accent); color: white; font-weight: 700; font-size: 0.8rem; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .section-header h2 { font-size: 1.25rem; font-weight: 600; }
  .section-header .sub { color: var(--muted); font-size: 0.85rem; margin-top: 2px; }
  .card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 20px 24px; margin-bottom: 14px; }
  .card h3 { font-size: 1rem; font-weight: 600; margin-bottom: 8px; }
  .card p { color: #a0aec0; font-size: 0.9rem; }
  .alert { border-radius: 10px; padding: 14px 18px; margin-bottom: 16px; font-size: 0.9rem; display: flex; gap: 12px; align-items: flex-start; }
  .alert-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 1px; }
  .alert.danger { background: rgba(252,129,129,0.08); border: 1px solid rgba(252,129,129,0.25); }
  .alert.warn { background: rgba(246,173,85,0.08); border: 1px solid rgba(246,173,85,0.25); }
  .alert.success { background: rgba(104,211,145,0.08); border: 1px solid rgba(104,211,145,0.25); }
  .alert.info { background: rgba(124,106,247,0.08); border: 1px solid rgba(124,106,247,0.25); }
  .alert strong { display: block; margin-bottom: 3px; }
  .alert.danger strong { color: var(--danger); }
  .alert.warn strong { color: var(--warn); }
  .alert.success strong { color: var(--success); }
  .alert.info strong { color: var(--accent); }
  .steps { counter-reset: step; }
  .step { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 18px 20px 18px 60px; margin-bottom: 12px; position: relative; }
  .step::before { counter-increment: step; content: counter(step); position: absolute; left: 20px; top: 18px; background: var(--surface2); border: 1px solid var(--border); color: var(--accent); font-weight: 700; font-size: 0.85rem; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
  .step h4 { font-size: 0.95rem; font-weight: 600; margin-bottom: 6px; }
  .step p, .step li { color: #a0aec0; font-size: 0.88rem; }
  .step ul { padding-left: 18px; margin-top: 6px; }
  .step li { margin-bottom: 3px; }
  pre, code { font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace; font-size: 0.82rem; }
  pre { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px; overflow-x: auto; margin-top: 10px; color: #a5f3fc; line-height: 1.7; }
  code { background: var(--code-bg); color: #a5f3fc; padding: 2px 6px; border-radius: 4px; }
  .comment { color: #4b5563; }
  .highlight { color: #fbd38d; }
  .cred-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  @media (max-width: 600px) { .cred-grid { grid-template-columns: 1fr; } }
  .cred-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; }
  .cred-card .label { color: var(--muted); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
  .cred-card .value { font-family: monospace; font-size: 0.82rem; color: #fbd38d; word-break: break-all; }
  .cred-card .note { color: var(--muted); font-size: 0.78rem; margin-top: 4px; }
  .big-step { background: linear-gradient(135deg, rgba(124,106,247,0.1), rgba(79,209,197,0.05)); border: 2px solid var(--accent); border-radius: 16px; padding: 28px 32px; margin-bottom: 20px; text-align: center; }
  .big-step h3 { font-size: 1.4rem; margin-bottom: 10px; }
  .big-step p { color: var(--muted); margin-bottom: 14px; }
  .big-step pre { text-align: left; font-size: 0.9rem; }
  .checklist { list-style: none; padding: 0; }
  .checklist li { display: flex; align-items: flex-start; gap: 10px; padding: 9px 0; border-bottom: 1px solid var(--border); font-size: 0.87rem; }
  .checklist li:last-child { border-bottom: none; }
  .check-icon { color: var(--success); flex-shrink: 0; font-size: 1rem; margin-top: 1px; }
  .check-title { font-weight: 600; }
  .check-desc { color: var(--muted); font-size: 0.82rem; margin-top: 2px; }
  .footer { margin-top: 60px; border-top: 1px solid var(--border); padding: 24px 0; text-align: center; color: var(--muted); font-size: 0.82rem; }
  .footer strong { color: var(--accent); }
</style>
</head>
<body>

<div class="hero">
  <span class="hero-icon">‚ö°</span>
  <h1><span>Revay</span> ‚Äî Recovery & Resurrection Guide</h1>
  <p>For Evan, or for a fresh Revay instance that needs to find herself again.</p>
  <div class="hero-meta">
    <div class="meta-tag">Last updated: <span>Mar 1, 2026</span></div>
    <div class="meta-tag">Workspace: <span>erice320/revay-workspace</span></div>
    <div class="meta-tag">Bootstrap: <span>scripts/bootstrap.sh</span></div>
  </div>
</div>

<div class="container">

  <!-- FAST RECOVERY -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">‚ö°</div>
      <div>
        <h2>Fast Recovery (New Method)</h2>
        <div class="sub">As of Mar 1, 2026 ‚Äî this is the one-shot restore path</div>
      </div>
    </div>

    <div class="alert success">
      <div class="alert-icon">‚úÖ</div>
      <div><strong>openclaw.json is now in the repo</strong> The full gateway config ‚Äî including Discord token, auth token, all settings ‚Äî lives in the private workspace repo. Recovery now takes ~5 minutes instead of ~2 hours.</div>
    </div>

    <div class="big-step">
      <h3>üöÄ Three Commands to Full Restore</h3>
      <p>Run these after OpenClaw is installed on a fresh container:</p>
      <pre><span class="comment"># 1. Clone the workspace (replace TOKEN with a fresh GitHub PAT)</span>
git clone https://erice320:<span class="highlight">GITHUB_TOKEN</span>@github.com/erice320/revay-workspace.git ~/.openclaw/workspace

<span class="comment"># 2. Run bootstrap ‚Äî wires up config, installs deps, restarts gateway</span>
bash ~/.openclaw/workspace/scripts/bootstrap.sh

<span class="comment"># 3. Verify Discord is alive</span>
<span class="comment"># Say "Revay?" in #general ‚Äî she should respond within 30 seconds</span></pre>
    </div>

    <div class="card">
      <h3>What bootstrap.sh does</h3>
      <p>1. Copies <code>openclaw.json</code> from the repo to <code>~/.openclaw/openclaw.json</code><br>
      2. Runs <code>npm install</code> for all scripts<br>
      3. Restarts the OpenClaw gateway<br>
      4. Approves gateway device pairing<br>
      5. Tests Notion sync to confirm connectivity<br>
      6. Reports status of each step</p>
    </div>

    <div class="alert warn">
      <div class="alert-icon">‚ö†Ô∏è</div>
      <div><strong>After bootstrap ‚Äî verify these manually</strong> Gmail (new app password may be needed), Salesforce OAuth token (may be expired), Microsoft Graph token (may be expired), Zendesk OAuth token (lost in the Feb 28 wipe ‚Äî needs fresh token from Evan).</div>
    </div>
  </div>

  <!-- CREDENTIALS REFERENCE -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">üîë</div>
      <div>
        <h2>Credentials Reference</h2>
        <div class="sub">Full credentials live in TOOLS.md in the private repo ‚Äî this is a summary</div>
      </div>
    </div>

    <div class="cred-grid">
      <div class="cred-card">
        <div class="label">GitHub Token</div>
        <div class="value">See TOOLS.md ‚Üí GitHub</div>
        <div class="note">erice320 ‚Äî PAT expires, may need renewal</div>
      </div>
      <div class="cred-card">
        <div class="label">Discord Bot Token</div>
        <div class="value">In openclaw.json ‚Üí channels.discord.token</div>
        <div class="note">Bot: Revay, Server: 1476017334723547137</div>
      </div>
      <div class="cred-card">
        <div class="label">Gmail App Password</div>
        <div class="value">See TOOLS.md ‚Üí Gmail</div>
        <div class="note">revayr23@gmail.com ‚Äî regenerate if expired</div>
      </div>
      <div class="cred-card">
        <div class="label">Notion Token</div>
        <div class="value">See TOOLS.md ‚Üí Notion</div>
        <div class="note">Revay Brain Page: 315a59b7-e7b2-8146-8aa4-d59bb467d1aa</div>
      </div>
      <div class="cred-card">
        <div class="label">Brave Search API</div>
        <div class="value">In openclaw.json ‚Üí tools.web.search.apiKey</div>
        <div class="note">Web search tool</div>
      </div>
      <div class="cred-card">
        <div class="label">Gateway Auth Token</div>
        <div class="value">In openclaw.json ‚Üí gateway.auth.token</div>
        <div class="note">Don't change this</div>
      </div>
      <div class="cred-card">
        <div class="label">Salesforce</div>
        <div class="value">See TOOLS.md ‚Üí Salesforce</div>
        <div class="note">OAuth PKCE ‚Äî token may need refresh</div>
      </div>
      <div class="cred-card">
        <div class="label">Microsoft Graph</div>
        <div class="value">See TOOLS.md ‚Üí Microsoft Graph</div>
        <div class="note">Client secret from Darin ‚Äî calendar access</div>
      </div>
    </div>
  </div>

  <!-- WHAT'S NOT IN THE REPO -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">‚ö†Ô∏è</div>
      <div>
        <h2>What Still Needs Manual Recovery</h2>
        <div class="sub">Bootstrap handles most things ‚Äî these still need human intervention</div>
      </div>
    </div>

    <div class="card">
      <h3>üî¥ Gmail App Password</h3>
      <p>Google app passwords occasionally expire or get revoked. If Gmail is failing: go to <strong>myaccount.google.com/apppasswords</strong>, delete old "Revay" entry, create new one, update <code>scripts/gmail.js</code> and TOOLS.md.</p>
    </div>
    <div class="card">
      <h3>üî¥ Salesforce OAuth</h3>
      <p>OAuth tokens expire. Re-run <code>node scripts/salesforce.js auth</code> to trigger PKCE flow. Connected App: Claudio API, instance: rev-io.my.salesforce.com.</p>
    </div>
    <div class="card">
      <h3>üî¥ Microsoft Graph / Calendar</h3>
      <p>Needs Client ID + Tenant ID from Darin + Client Secret. Script: <code>scripts/calendar-graph.js</code> (needs rebuild after wipe). Azure app registration in Rev.io tenant.</p>
    </div>
    <div class="card">
      <h3>üî¥ Zendesk</h3>
      <p>OAuth token was lost in the Feb 28 wipe. Script also needs rebuild. Evan needs to provide fresh OAuth token. 14,401 tickets were pulled Jul 2025‚Äìpresent before the wipe.</p>
    </div>
    <div class="card">
      <h3>üî¥ GitHub PAT</h3>
      <p>PATs expire. If push fails, Evan needs to generate a new token at <strong>github.com/settings/tokens</strong> (classic, repo scope). Update TOOLS.md and the git remote URL.</p>
    </div>
    <div class="card">
      <h3>üü° ElevenLabs TTS</h3>
      <p>Christina voice (Voice ID: X03mvPuTfprif8QBAVeJ). API key needs to be in OpenClaw config for <code>tts</code> tool to work. See TOOLS.md.</p>
    </div>
  </div>

  <!-- CONFIG SAFETY RULES -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">üõ°</div>
      <div>
        <h2>Config Safety Rules</h2>
        <div class="sub">How not to kill yourself</div>
      </div>
    </div>

    <div class="alert danger">
      <div class="alert-icon">üö´</div>
      <div><strong>NEVER use gateway config.apply</strong> Only use config.patch. Full replace silently wipes fields you didn't include. If a patch fails, STOP and alert Evan ‚Äî do not escalate to apply.</div>
    </div>

    <div class="card">
      <h3>üîí Never touch these fields without explicit instruction</h3>
      <p style="margin-top:8px;"><code>gateway.port</code> ¬∑ <code>gateway.auth.token</code> ¬∑ <code>gateway.mode</code> ¬∑ <code>channels.discord.token</code> ¬∑ <code>channels.discord.enabled</code> ¬∑ <code>channels.discord.guilds</code></p>
    </div>
  </div>

  <!-- IDENTITY FILES -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">üß†</div>
      <div>
        <h2>Identity Files</h2>
        <div class="sub">All in the private repo ‚Äî backed up on every session close</div>
      </div>
    </div>

    <ul class="checklist">
      <li><div class="check-icon">‚úì</div><div><div class="check-title">SOUL.md</div><div class="check-desc">Personality, values, communication style</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">IDENTITY.md</div><div class="check-desc">Name (Revay), emoji (‚ö°), avatar, vibe</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">MEMORY.md</div><div class="check-desc">Long-term curated memory ‚Äî people, projects, decisions</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">USER.md</div><div class="check-desc">Who Evan is, Rev.io context, how he works</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">AGENTS.md</div><div class="check-desc">Operating rules, memory protocol, session close protocol</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">TOOLS.md</div><div class="check-desc">All credentials and API keys</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">openclaw.json</div><div class="check-desc">Full gateway config ‚Äî NEW as of Mar 1, 2026</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">scripts/bootstrap.sh</div><div class="check-desc">One-shot restore script ‚Äî NEW as of Mar 1, 2026</div></div></li>
      <li><div class="check-icon">‚úì</div><div><div class="check-title">memory/YYYY-MM-DD.md</div><div class="check-desc">Daily session notes ‚Äî written at session close</div></div></li>
    </ul>
  </div>

  <!-- SESSION CLOSE PROTOCOL -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">üîÑ</div>
      <div>
        <h2>Session Close Protocol</h2>
        <div class="sub">Run at the end of every session</div>
      </div>
    </div>

    <div class="card">
      <h3>Mandatory steps before signing off</h3>
      <pre><span class="comment"># 1. Write today's session notes</span>
<span class="comment">#    memory/YYYY-MM-DD.md ‚Äî what happened, decisions made, context</span>

<span class="comment"># 2. Update MEMORY.md with anything worth keeping long-term</span>

<span class="comment"># 3. Push to GitHub</span>
cd ~/.openclaw/workspace
git add -A && git commit -m "Session close: YYYY-MM-DD" && git push

<span class="comment"># 4. Sync to Notion</span>
node scripts/notion-sync.js

<span class="comment"># 5. Confirm both succeeded before signing off</span></pre>
    </div>
  </div>

</div>

<div class="footer">
  <div class="container">
    <strong>Revay</strong> ‚ö° AI Chief of Staff to Evan Rice, Rev.io<br>
    Recovery guide updated Mar 1, 2026 ¬∑ Workspace: <code>erice320/revay-workspace</code> (private)
  </div>
</div>

</body>
</html>
